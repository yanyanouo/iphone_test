<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iPhoneéœ‡å‹•åµæ¸¬å™¨ - æ•¸æ“šè¨˜éŒ„ç‰ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .status {
            font-size: 16px;
            opacity: 0.8;
        }

        .button-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        .permission-btn {
            display: block;
            width: 100%;
            padding: 15px;
            font-size: 16px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }

        .control-btn {
            padding: 15px;
            font-size: 16px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .start-btn {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
            box-shadow: 0 4px 15px rgba(46, 204, 113, 0.3);
        }

        .stop-btn {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.3);
        }

        .export-btn {
            background: linear-gradient(45deg, #f39c12, #e67e22);
            color: white;
            box-shadow: 0 4px 15px rgba(243, 156, 18, 0.3);
            width: 100%;
            margin-bottom: 20px;
        }

        .control-btn:hover {
            transform: translateY(-2px);
        }

        .control-btn:disabled {
            background: #666 !important;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .recording-indicator {
            background: rgba(231, 76, 60, 0.2);
            border: 2px solid #e74c3c;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
            animation: pulse 2s infinite;
            display: none;
        }

        .recording-indicator.active {
            display: block;
        }

        @keyframes pulse {
            0%, 100% { 
                border-color: #e74c3c;
                background: rgba(231, 76, 60, 0.2);
            }
            50% { 
                border-color: #c0392b;
                background: rgba(231, 76, 60, 0.4);
            }
        }

        .vibration-display {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            text-align: center;
        }

        .vibration-level {
            font-size: 72px;
            font-weight: bold;
            margin: 20px 0;
            transition: all 0.3s ease;
        }

        .level-low { color: #27ae60; }
        .level-medium { color: #f39c12; }
        .level-high { color: #e74c3c; }

        .vibration-bar {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }

        .bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #27ae60, #f39c12, #e74c3c);
            width: 0%;
            transition: width 0.1s ease;
            border-radius: 10px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #3498db;
        }

        .stat-label {
            font-size: 12px;
            opacity: 0.7;
            margin-top: 5px;
        }

        .data-summary {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .data-summary h3 {
            margin-bottom: 15px;
            text-align: center;
            color: #3498db;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .summary-row:last-child {
            border-bottom: none;
        }

        .hidden {
            display: none;
        }

        .measurement-info {
            background: rgba(46, 204, 113, 0.2);
            border-left: 4px solid #2ecc71;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .export-info {
            background: rgba(243, 156, 18, 0.2);
            border-left: 4px solid #f39c12;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
        }

        .timer {
            font-size: 20px;
            font-weight: bold;
            color: #e74c3c;
            text-align: center;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“³ éœ‡å‹•æ•¸æ“šè¨˜éŒ„å™¨</h1>
            <div class="status" id="status">æº–å‚™é€²è¡Œéœ‡å‹•é‡æ¸¬</div>
        </div>

        <!-- æ¬Šé™å•Ÿå‹•æŒ‰éˆ• -->
        <button id="requestPermission" class="permission-btn">
            ğŸš€ å•Ÿå‹•æ„Ÿæ¸¬å™¨æ¬Šé™
        </button>

        <!-- é‡æ¸¬æ§åˆ¶æŒ‰éˆ• -->
        <div class="button-group">
            <button id="startMeasurement" class="control-btn start-btn" disabled>
                â–¶ï¸ é–‹å§‹é‡æ¸¬
            </button>
            <button id="stopMeasurement" class="control-btn stop-btn" disabled>
                â¹ï¸ çµæŸé‡æ¸¬
            </button>
        </div>

        <!-- éŒ„è£½æŒ‡ç¤ºå™¨ -->
        <div id="recordingIndicator" class="recording-indicator">
            <div>ğŸ”´ æ­£åœ¨è¨˜éŒ„éœ‡å‹•æ•¸æ“š</div>
            <div class="timer" id="timer">00:00</div>
            <div>å·²è¨˜éŒ„ <span id="dataPoints">0</span> ç­†æ•¸æ“š</div>
        </div>

        <!-- åŒ¯å‡ºæŒ‰éˆ• -->
        <button id="exportBtn" class="control-btn export-btn" disabled>
            ğŸ“ åŒ¯å‡ºCSVæª”æ¡ˆ
        </button>

        <!-- é‡æ¸¬è³‡è¨Š -->
        <div id="measurementInfo" class="measurement-info hidden">
            <h3>ğŸ“Š æœ¬æ¬¡é‡æ¸¬è³‡è¨Š</h3>
            <div>é–‹å§‹æ™‚é–“: <span id="startTime">--</span></div>
            <div>é‡æ¸¬æ™‚é•·: <span id="duration">--</span></div>
            <div>æ•¸æ“šç­†æ•¸: <span id="totalDataPoints">0</span></div>
        </div>

        <!-- éœ‡å‹•é¡¯ç¤º -->
        <div class="vibration-display">
            <div class="timer" id="liveTimer">00:00</div>
            <div>ç•¶å‰éœ‡å‹•å¼·åº¦</div>
            <div class="vibration-level" id="vibrationLevel">0.0</div>
            <div class="vibration-bar">
                <div class="bar-fill" id="vibrationBar"></div>
            </div>
            <div id="vibrationStatus">éœæ­¢</div>
        </div>

        <!-- å³æ™‚çµ±è¨ˆ -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value" id="maxVibration">0.0</div>
                <div class="stat-label">æœ€å¤§éœ‡å‹•</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="avgVibration">0.0</div>
                <div class="stat-label">å¹³å‡éœ‡å‹•</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="vibrationCount">0</div>
                <div class="stat-label">éœ‡å‹•æ¬¡æ•¸</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="samplingRate">0</div>
                <div class="stat-label">æ¡æ¨£ç‡(Hz)</div>
            </div>
        </div>

        <!-- æ•¸æ“šæ‘˜è¦ -->
        <div id="dataSummary" class="data-summary hidden">
            <h3>ğŸ“ˆ æ•¸æ“šæ‘˜è¦</h3>
            <div class="summary-row">
                <span>é‡æ¸¬æ™‚é–“</span>
                <span id="summaryDuration">--</span>
            </div>
            <div class="summary-row">
                <span>ç¸½æ•¸æ“šé»</span>
                <span id="summaryDataPoints">--</span>
            </div>
            <div class="summary-row">
                <span>å¹³å‡æ¡æ¨£ç‡</span>
                <span id="summaryAvgRate">-- Hz</span>
            </div>
            <div class="summary-row">
                <span>æœ€å¤§éœ‡å‹•å€¼</span>
                <span id="summaryMaxVibration">--</span>
            </div>
            <div class="summary-row">
                <span>å¹³å‡éœ‡å‹•å€¼</span>
                <span id="summaryAvgVibration">--</span>
            </div>
        </div>

        <!-- åŒ¯å‡ºæç¤º -->
        <div id="exportInfo" class="export-info hidden">
            <h3>ğŸ’¾ æ•¸æ“šå·²æº–å‚™åŒ¯å‡º</h3>
            <p>é»æ“Šä¸Šæ–¹ã€ŒåŒ¯å‡ºCSVæª”æ¡ˆã€æŒ‰éˆ•ä¸‹è¼‰æ•¸æ“š</p>
            <p>æª”æ¡ˆåŒ…å«ï¼šæ™‚é–“æˆ³è¨˜ã€X/Y/Zè»¸åŠ é€Ÿåº¦ã€ç¸½éœ‡å‹•å¼·åº¦</p>
        </div>
    </div>

    <script>
        class VibrationDataRecorder {
            constructor() {
                this.isPermissionGranted = false;
                this.isRecording = false;
                this.measurementData = [];
                this.startTime = null;
                this.endTime = null;
                this.timerInterval = null;
                
                // çµ±è¨ˆè³‡æ–™
                this.maxVibration = 0;
                this.vibrationSum = 0;
                this.vibrationCount = 0;
                this.samplingCount = 0;
                this.lastSampleTime = 0;
                
                this.elements = {
                    // æ§åˆ¶æŒ‰éˆ•
                    requestPermission: document.getElementById('requestPermission'),
                    startMeasurement: document.getElementById('startMeasurement'),
                    stopMeasurement: document.getElementById('stopMeasurement'),
                    exportBtn: document.getElementById('exportBtn'),
                    
                    // ç‹€æ…‹é¡¯ç¤º
                    status: document.getElementById('status'),
                    recordingIndicator: document.getElementById('recordingIndicator'),
                    timer: document.getElementById('timer'),
                    liveTimer: document.getElementById('liveTimer'),
                    dataPoints: document.getElementById('dataPoints'),
                    
                    // éœ‡å‹•é¡¯ç¤º
                    vibrationLevel: document.getElementById('vibrationLevel'),
                    vibrationBar: document.getElementById('vibrationBar'),
                    vibrationStatus: document.getElementById('vibrationStatus'),
                    
                    // çµ±è¨ˆæ•¸æ“š
                    maxVibration: document.getElementById('maxVibration'),
                    avgVibration: document.getElementById('avgVibration'),
                    vibrationCount: document.getElementById('vibrationCount'),
                    samplingRate: document.getElementById('samplingRate'),
                    
                    // é‡æ¸¬è³‡è¨Š
                    measurementInfo: document.getElementById('measurementInfo'),
                    startTime: document.getElementById('startTime'),
                    duration: document.getElementById('duration'),
                    totalDataPoints: document.getElementById('totalDataPoints'),
                    
                    // æ•¸æ“šæ‘˜è¦
                    dataSummary: document.getElementById('dataSummary'),
                    summaryDuration: document.getElementById('summaryDuration'),
                    summaryDataPoints: document.getElementById('summaryDataPoints'),
                    summaryAvgRate: document.getElementById('summaryAvgRate'),
                    summaryMaxVibration: document.getElementById('summaryMaxVibration'),
                    summaryAvgVibration: document.getElementById('summaryAvgVibration'),
                    exportInfo: document.getElementById('exportInfo')
                };
                
                this.initializeEventListeners();
            }
            
            initializeEventListeners() {
                this.elements.requestPermission.addEventListener('click', () => this.requestPermissions());
                this.elements.startMeasurement.addEventListener('click', () => this.startMeasurement());
                this.elements.stopMeasurement.addEventListener('click', () => this.stopMeasurement());
                this.elements.exportBtn.addEventListener('click', () => this.exportToCSV());
            }
            
            async requestPermissions() {
                try {
                    this.elements.requestPermission.disabled = true;
                    this.elements.requestPermission.textContent = 'è«‹æ±‚æ¬Šé™ä¸­...';
                    this.elements.status.textContent = 'æ­£åœ¨è«‹æ±‚æ„Ÿæ¸¬å™¨æ¬Šé™...';

                    // è«‹æ±‚æ„Ÿæ¸¬å™¨æ¬Šé™ (iOS 13+)
                    if (typeof DeviceMotionEvent.requestPermission === 'function') {
                        const motionPermission = await DeviceMotionEvent.requestPermission();
                        if (motionPermission !== 'granted') {
                            throw new Error('å‹•ä½œæ„Ÿæ¸¬å™¨æ¬Šé™è¢«æ‹’çµ•');
                        }
                    }

                    this.isPermissionGranted = true;
                    this.elements.requestPermission.style.display = 'none';
                    this.elements.startMeasurement.disabled = false;
                    this.elements.status.textContent = 'âœ… æ¬Šé™å·²å–å¾—ï¼Œå¯ä»¥é–‹å§‹é‡æ¸¬';

                } catch (error) {
                    this.elements.status.textContent = 'âŒ ' + error.message;
                    this.elements.requestPermission.disabled = false;
                    this.elements.requestPermission.textContent = 'ğŸš€ å•Ÿå‹•æ„Ÿæ¸¬å™¨æ¬Šé™';
                }
            }
            
            startMeasurement() {
                if (!this.isPermissionGranted) return;
                
                // é‡ç½®æ•¸æ“š
                this.measurementData = [];
                this.maxVibration = 0;
                this.vibrationSum = 0;
                this.vibrationCount = 0;
                this.samplingCount = 0;
                this.startTime = new Date();
                this.isRecording = true;
                
                // æ›´æ–°UI
                this.elements.startMeasurement.disabled = true;
                this.elements.stopMeasurement.disabled = false;
                this.elements.exportBtn.disabled = true;
                this.elements.recordingIndicator.classList.add('active');
                this.elements.status.textContent = 'ğŸ”´ æ­£åœ¨è¨˜éŒ„éœ‡å‹•æ•¸æ“š...';
                
                // éš±è—ä¹‹å‰çš„çµæœ
                this.elements.measurementInfo.classList.add('hidden');
                this.elements.dataSummary.classList.add('hidden');
                this.elements.exportInfo.classList.add('hidden');
                
                // é–‹å§‹ç›£è½æ„Ÿæ¸¬å™¨
                window.addEventListener('devicemotion', this.handleDeviceMotion.bind(this));
                
                // é–‹å§‹è¨ˆæ™‚å™¨
                this.startTimer();
                
                // é¡¯ç¤ºé–‹å§‹æ™‚é–“
                this.elements.startTime.textContent = this.startTime.toLocaleString();
            }
            
            stopMeasurement() {
                this.isRecording = false;
                this.endTime = new Date();
                
                // åœæ­¢ç›£è½æ„Ÿæ¸¬å™¨
                window.removeEventListener('devicemotion', this.handleDeviceMotion.bind(this));
                
                // åœæ­¢è¨ˆæ™‚å™¨
                this.stopTimer();
                
                // æ›´æ–°UI
                this.elements.startMeasurement.disabled = false;
                this.elements.stopMeasurement.disabled = true;
                this.elements.exportBtn.disabled = false;
                this.elements.recordingIndicator.classList.remove('active');
                this.elements.status.textContent = 'â¹ï¸ é‡æ¸¬å·²å®Œæˆ';
                
                // é¡¯ç¤ºé‡æ¸¬è³‡è¨Š
                this.showMeasurementSummary();
            }
            
            handleDeviceMotion(event) {
                if (!this.isRecording) return;
                
                const acceleration = event.acceleration;
                if (!acceleration) return;
                
                const currentTime = Date.now();
                const timestamp = new Date().toISOString();
                
                // è¨ˆç®—ç¸½éœ‡å‹•å¼·åº¦
                const totalVibration = Math.sqrt(
                    Math.pow(acceleration.x || 0, 2) +
                    Math.pow(acceleration.y || 0, 2) +
                    Math.pow(acceleration.z || 0, 2)
                );
                
                // è¨˜éŒ„æ•¸æ“š
                this.measurementData.push({
                    timestamp: timestamp,
                    time: currentTime - this.startTime.getTime(),
                    accelX: acceleration.x || 0,
                    accelY: acceleration.y || 0,
                    accelZ: acceleration.z || 0,
                    totalVibration: totalVibration
                });
                
                // æ›´æ–°çµ±è¨ˆ
                this.updateStatistics(totalVibration, currentTime);
                
                // æ›´æ–°é¡¯ç¤º
                this.updateDisplay(totalVibration);
            }
            
            updateStatistics(vibration, currentTime) {
                // æ›´æ–°æœ€å¤§éœ‡å‹•
                if (vibration > this.maxVibration) {
                    this.maxVibration = vibration;
                }
                
                // æ›´æ–°å¹³å‡éœ‡å‹•
                this.vibrationSum += vibration;
                this.samplingCount++;
                
                // è¨ˆç®—éœ‡å‹•æ¬¡æ•¸ï¼ˆå¤§æ–¼é–¾å€¼çš„æ¬¡æ•¸ï¼‰
                if (vibration > 2) {
                    this.vibrationCount++;
                }
                
                // è¨ˆç®—æ¡æ¨£ç‡
                if (this.lastSampleTime > 0) {
                    const timeDiff = (currentTime - this.lastSampleTime) / 1000;
                    const instantRate = 1 / timeDiff;
                    // ä½¿ç”¨ç§»å‹•å¹³å‡ä¾†å¹³æ»‘æ¡æ¨£ç‡
                    const currentRate = parseFloat(this.elements.samplingRate.textContent) || 0;
                    const smoothedRate = (currentRate * 0.9 + instantRate * 0.1);
                    this.elements.samplingRate.textContent = smoothedRate.toFixed(1);
                }
                this.lastSampleTime = currentTime;
            }
            
            updateDisplay(vibration) {
                const displayValue = vibration.toFixed(1);
                this.elements.vibrationLevel.textContent = displayValue;
                
                // æ›´æ–°é¡è‰²å’Œç‹€æ…‹
                this.elements.vibrationLevel.className = 'vibration-level';
                if (vibration < 2) {
                    this.elements.vibrationLevel.classList.add('level-low');
                    this.elements.vibrationStatus.textContent = 'éœæ­¢';
                } else if (vibration < 8) {
                    this.elements.vibrationLevel.classList.add('level-medium');
                    this.elements.vibrationStatus.textContent = 'è¼•å¾®éœ‡å‹•';
                } else {
                    this.elements.vibrationLevel.classList.add('level-high');
                    this.elements.vibrationStatus.textContent = 'å¼·çƒˆéœ‡å‹•';
                }
                
                // æ›´æ–°é€²åº¦æ¢
                const percentage = Math.min((vibration / 20) * 100, 100);
                this.elements.vibrationBar.style.width = percentage + '%';
                
                // æ›´æ–°çµ±è¨ˆé¡¯ç¤º
                this.elements.maxVibration.textContent = this.maxVibration.toFixed(1);
                const avgVibration = this.samplingCount > 0 ? this.vibrationSum / this.samplingCount : 0;
                this.elements.avgVibration.textContent = avgVibration.toFixed(1);
                this.elements.vibrationCount.textContent = this.vibrationCount;
                this.elements.dataPoints.textContent = this.measurementData.length;
            }
            
            startTimer() {
                this.timerInterval = setInterval(() => {
                    const elapsed = Date.now() - this.startTime.getTime();
                    const timeString = this.formatTime(elapsed);
                    this.elements.timer.textContent = timeString;
                    this.elements.liveTimer.textContent = timeString;
                }, 1000);
            }
            
            stopTimer() {
                if (this.timerInterval) {
                    clearInterval(this.timerInterval);
                    this.timerInterval = null;
                }
            }
            
            formatTime(milliseconds) {
                const totalSeconds = Math.floor(milliseconds / 1000);
                const minutes = Math.floor(totalSeconds / 60);
                const seconds = totalSeconds % 60;
                return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }
            
            showMeasurementSummary() {
                const duration = this.endTime.getTime() - this.startTime.getTime();
                const durationString = this.formatTime(duration);
                const avgSamplingRate = this.measurementData.length / (duration / 1000);
                const avgVibration = this.samplingCount > 0 ? this.vibrationSum / this.samplingCount : 0;
                
                // æ›´æ–°é‡æ¸¬è³‡è¨Š
                this.elements.duration.textContent = durationString;
                this.elements.totalDataPoints.textContent = this.measurementData.length;
                this.elements.measurementInfo.classList.remove('hidden');
                
                // æ›´æ–°æ•¸æ“šæ‘˜è¦
                this.elements.summaryDuration.textContent = durationString;
                this.elements.summaryDataPoints.textContent = this.measurementData.length;
                this.elements.summaryAvgRate.textContent = avgSamplingRate.toFixed(1) + ' Hz';
                this.elements.summaryMaxVibration.textContent = this.maxVibration.toFixed(2);
                this.elements.summaryAvgVibration.textContent = avgVibration.toFixed(2);
                this.elements.dataSummary.classList.remove('hidden');
                
                // é¡¯ç¤ºåŒ¯å‡ºæç¤º
                this.elements.exportInfo.classList.remove('hidden');
            }
            
            exportToCSV() {
                if (this.measurementData.length === 0) {
                    alert('æ²’æœ‰æ•¸æ“šå¯ä»¥åŒ¯å‡º');
                    return;
                }
                
                // å»ºç«‹CSVæ¨™é ­
                const headers = [
                    'Timestamp',
                    'Time_ms',
                    'Acceleration_X',
                    'Acceleration_Y', 
                    'Acceleration_Z',
                    'Total_Vibration'
                ];
                
                // å»ºç«‹CSVå…§å®¹
                let csvContent = headers.join(',') + '\n';
                
                this.measurementData.forEach(data => {
                    const row = [
                        data.timestamp,
                        data.time,
                        data.accelX.toFixed(6),
                        data.accelY.toFixed(6),
                        data.accelZ.toFixed(6),
                        data.totalVibration.toFixed(6)
                    ];
                    csvContent += row.join(',') + '\n';
                });
                
                // å»ºç«‹ä¸‹è¼‰é€£çµ
                const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a');
                const url = URL.createObjectURL(blob);
                
                // ç”¢ç”Ÿæª”æ¡ˆåç¨±
                const startTimeStr = this.startTime.toISOString().replace(/[:.]/g, '-');
                const filename = `vibration_data_${startTimeStr}.csv`;
                
                link.setAttribute('href', url);
                link.setAttribute('download', filename);
                link.style.visibility = 'hidden';
                
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                // æ›´æ–°ç‹€æ…‹
                this.elements.status.textContent = `âœ… CSVæª”æ¡ˆå·²ä¸‹è¼‰: ${filename}`;
            }
        }
        
        // åˆå§‹åŒ–æ‡‰ç”¨ç¨‹å¼
        document.addEventListener('DOMContentLoaded', () => {
            // æª¢æŸ¥åŸºæœ¬æ”¯æ´
            if (!window.DeviceMotionEvent) {
                document.getElementById('status').textContent = 'âŒ æ­¤è£ç½®ä¸æ”¯æ´å‹•ä½œæ„Ÿæ¸¬å™¨';
                document.getElementById('requestPermission').disabled = true;
                return;
            }
            
            new VibrationDataRecorder();
        });
    </script>
</body>
</html>
